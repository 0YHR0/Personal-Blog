(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{434:function(a,t,r){"use strict";r.r(t);var o=r(2),e=Object(o.a)({},(function(){var a=this,t=a._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",{attrs:{id:"phase-of-dw"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#phase-of-dw"}},[a._v("#")]),a._v(" Phase of DW")]),a._v(" "),t("p",[a._v("结构："),t("img",{attrs:{src:"https://markdown-1301334775.cos.eu-frankfurt.myqcloud.com/markdown/366ca190-70e2-402a-ac2d-0d44937b2322-14899999.jpg",alt:"img"}})]),a._v(" "),t("p",[a._v("Monitoring：监视data changes in the data source incrementally")]),a._v(" "),t("ul",[t("li",[a._v("只能提供被改变的数据信息：only something has been changed, not the change data")]),a._v(" "),t("li",[a._v("可以监视all the changes 或者 net effect of changes")]),a._v(" "),t("li",[a._v("可以data source主动告诉monitor自己的数据改变了，也可以monitor间隔的查询source中数据是否改变")]),a._v(" "),t("li",[a._v("几种实现方法，分为外部的和内部的"),t("img",{attrs:{src:"https://markdown-1301334775.cos.eu-frankfurt.myqcloud.com/markdown/f5ff812d-039f-488f-931d-fc8087b305b5-14899999.jpg",alt:"img"}})]),a._v(" "),t("li",[a._v("快照算法，最后生成一个F out"),t("img",{attrs:{src:"https://markdown-1301334775.cos.eu-frankfurt.myqcloud.com/markdown/2d3b56c3-deff-4ac5-af02-f945578ed03f-14899999.jpg",alt:"img"}}),a._v(" "),t("ul",[t("li",[a._v("先根据key排序，然后再对比")]),a._v(" "),t("li",[a._v("快照文件可能是压缩的")]),a._v(" "),t("li",[a._v("为了优化快照会被读很多次，可以用window算法\n"),t("ul",[t("li",[a._v("前提条件  "),t("img",{staticStyle:{zoom:"33%"},attrs:{src:"https://markdown-1301334775.cos.eu-frankfurt.myqcloud.com/markdown/7d83836a-4a1c-4bf4-977d-aa630e0c5804-14899999.jpg",alt:"img"}})]),a._v(" "),t("li",[a._v("F1比F2老，并且F1，F2是被排好序的"),t("img",{attrs:{src:"https://markdown-1301334775.cos.eu-frankfurt.myqcloud.com/markdown/91d1e8fb-68ee-41e7-ba0d-a2a8b8ffb0ff-14899999.jpg",alt:"img"}})]),a._v(" "),t("li",[a._v("match的意思就是计算哪些要Insert，哪些要update，哪些要delete，并把他们写到F out文件中")]),a._v(" "),t("li",[a._v("如果match成功的元组，则删除，match失败的元组，放到aging buffer中，由下一次继续匹配")]),a._v(" "),t("li",[a._v("因为F1是老的快照，所以循环最后没有匹配的就delete掉")]),a._v(" "),t("li",[a._v("F2是新的快照，所以循环最后没有匹配到就insert")])])])])])]),a._v(" "),t("h3",{attrs:{id:"extraction"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#extraction"}},[a._v("#")]),a._v(" Extraction")]),a._v(" "),t("p",[t("img",{attrs:{src:"https://markdown-1301334775.cos.eu-frankfurt.myqcloud.com/markdown/94ee60d2-811a-41fc-8ca8-96f74c01a7d5-14899999.jpg",alt:"img"}})]),a._v(" "),t("ul",[t("li",[a._v("No access to the source system, 直接把数据库导出，压缩再传输"),t("img",{attrs:{src:"https://markdown-1301334775.cos.eu-frankfurt.myqcloud.com/markdown/f1041c15-59aa-4f6e-89cb-9fccb425b5b1-14899999.jpg",alt:"img"}}),a._v(" "),t("ul",[t("li",[a._v("eg：导出DB2，使用 | 作为列的分隔符，messages 是存放error或者warning信息的")]),a._v(" "),t("li",[a._v("Load和import对比，load的并发性更高，performance更高，但是import的数据完整性更好"),t("img",{attrs:{src:"https://markdown-1301334775.cos.eu-frankfurt.myqcloud.com/markdown/ecf7da09-5d35-418e-b213-f1c4ba13b4d0-14899999.jpg",alt:"img"}}),t("img",{attrs:{src:"https://markdown-1301334775.cos.eu-frankfurt.myqcloud.com/markdown/c9407b9f-b7a2-4385-9e97-8a9a9a11227e-14899999.jpg",alt:"img"}})]),a._v(" "),t("li",[a._v("Filter"),t("img",{attrs:{src:"https://markdown-1301334775.cos.eu-frankfurt.myqcloud.com/markdown/86966c54-761a-46ab-bcf1-78597ca36958-14899999.jpg",alt:"img"}}),a._v(" "),t("ul",[t("li",[a._v("Bad files是不能处理的文件")]),a._v(" "),t("li",[a._v("Discard files 是不满足限制性条件的文件")])])]),a._v(" "),t("li",[a._v("直接整合外部数据源的三种方法："),t("img",{attrs:{src:"https://markdown-1301334775.cos.eu-frankfurt.myqcloud.com/markdown/5890fdcb-54ef-4980-9bbe-8c9666403ff8-14899999.jpg",alt:"img"}}),a._v(" "),t("ul",[t("li",[a._v("把外部的数据注册成一张表")]),a._v(" "),t("li",[a._v("把外部数据源通过java等语言查询成一张表")]),a._v(" "),t("li",[a._v("通过wrapper把外部多个数据库统一一下，使内部看来像在访问一个数据库一样")])])])])])]),a._v(" "),t("h3",{attrs:{id:"load"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#load"}},[a._v("#")]),a._v(" Load")]),a._v(" "),t("p",[t("img",{attrs:{src:"https://markdown-1301334775.cos.eu-frankfurt.myqcloud.com/markdown/cd277738-ddf8-4e82-a46d-f2431716d264-14899999.jpg",alt:"img"}})]),a._v(" "),t("ul",[t("li",[t("p",[a._v("Insert: 插入数据，不改变原数据")])]),a._v(" "),t("li",[t("p",[a._v("Insert_Update:  插入数据，对于主键相同的数据更新")])]),a._v(" "),t("li",[t("p",[a._v("Replace：把原来的数据都删除，不改变表以及索引的定义")])]),a._v(" "),t("li",[t("p",[a._v("Replace_Create：如果表存在的话，把原来的数据都删除，不改变表以及索引的定义，如果表不存在的话，创建表以及索引，再把数据插入")])]),a._v(" "),t("li",[t("p",[a._v("Merge into：merge两个表，如果和原来的表有某一行的规定字段是一样的话，就update，否则insert"),t("img",{staticStyle:{zoom:"33%"},attrs:{src:"https://markdown-1301334775.cos.eu-frankfurt.myqcloud.com/markdown/da1f535f-67d5-44b9-8938-14a35e212bae-14899999.jpg",alt:"img"}})])]),a._v(" "),t("li",[t("p",[a._v("Multiple inserts：把多行插入到多个表中"),t("img",{attrs:{src:"https://markdown-1301334775.cos.eu-frankfurt.myqcloud.com/markdown/5673e6d3-eb54-4966-980b-a818eaed6274-14899999.jpg",alt:"img"}})]),a._v(" "),t("ul",[t("li",[a._v("如果用insert first的话，key小于100的只会被加到customer表中")]),a._v(" "),t("li",[a._v("用insert all的话，两个表都会加入")])])]),a._v(" "),t("li",[t("p",[a._v("Replication：")]),a._v(" "),t("ul",[t("li",[a._v("data distribution（asymmetric）：只有source可以update\n"),t("ul",[t("li",[a._v("应用：通常source是data warehouse，target是data mart")])])]),a._v(" "),t("li",[a._v("data consolidation（asymmetric）：多个source可以update，并整合到target库中，可能会有conflict\n"),t("ul",[t("li",[a._v("应用：通常是从各个source中取数据整合到DW中")]),a._v(" "),t("li",[a._v("应用：或者是从independent datamarts 整合到global DW中")])])]),a._v(" "),t("li",[a._v("update anywhere（symmetric）：任何地方都可以update，会有更多的conflict，基本无应用"),t("img",{attrs:{src:"https://markdown-1301334775.cos.eu-frankfurt.myqcloud.com/markdown/3ea716d5-ae86-4714-b210-cff1ca101e99-14899999.jpg",alt:"img"}})])]),a._v(" "),t("h3",{attrs:{id:"transformation"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#transformation"}},[a._v("#")]),a._v(" Transformation")]),a._v(" "),t("p",[t("img",{attrs:{src:"https://markdown-1301334775.cos.eu-frankfurt.myqcloud.com/markdown/c3438857-f61f-40a7-ae9b-1bde6550080c-14899999.jpg",alt:"img"}})]),a._v(" "),t("p",[a._v("semantics：必须要统一语义，对相同的东西有相同的叫法")]),a._v(" "),t("p",[a._v("Data integration需要考虑的东西："),t("img",{attrs:{src:"https://markdown-1301334775.cos.eu-frankfurt.myqcloud.com/markdown/1c9b32a6-e354-425e-91c7-4e067cd04456-14899999.jpg",alt:"img"}}),t("img",{attrs:{src:"https://markdown-1301334775.cos.eu-frankfurt.myqcloud.com/markdown/c62eb1ec-c207-4082-bde3-84a1144f9335-14899999.jpg",alt:"img"}})])])]),a._v(" "),t("p",[a._v("Data cleansing：其中householding就是grouping"),t("img",{attrs:{src:"https://markdown-1301334775.cos.eu-frankfurt.myqcloud.com/markdown/d95ebd48-0e5e-40f0-92d0-5c5d01d42a32-14899999.jpg",alt:"img"}}),t("img",{attrs:{src:"https://markdown-1301334775.cos.eu-frankfurt.myqcloud.com/markdown/9afe0128-b890-43bd-b149-2e4d03090601-14899999.jpg",alt:"img"}})]),a._v(" "),t("p",[a._v("Data quality"),t("img",{attrs:{src:"https://markdown-1301334775.cos.eu-frankfurt.myqcloud.com/markdown/50d95c4f-c3bb-4dd4-8c83-8c40b86f4e17-14899999.jpg",alt:"img"}})]),a._v(" "),t("p",[a._v("Tools"),t("img",{attrs:{src:"https://markdown-1301334775.cos.eu-frankfurt.myqcloud.com/markdown/4d86995f-5500-43e7-a02c-c838a6e00055-14899999.jpg",alt:"img"}})])])}),[],!1,null,null,null);t.default=e.exports}}]);