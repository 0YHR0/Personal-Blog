(window.webpackJsonp=window.webpackJsonp||[]).push([[289],{685:function(t,a,r){"use strict";r.r(a);var s=r(2),m=Object(s.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"advanced"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#advanced"}},[t._v("#")]),t._v(" Advanced")]),t._v(" "),a("h2",{attrs:{id:"sds"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#sds"}},[t._v("#")]),t._v(" SDS")]),t._v(" "),a("ul",[a("li",[t._v("Redis定义了多种SDS来存放字符串（不同长度用不同的结构体）")])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://markdown-1301334775.cos.eu-frankfurt.myqcloud.com/image-20231022225056755.png",alt:"image-20231022225056755"}})]),t._v(" "),a("p",[a("img",{attrs:{src:"https://markdown-1301334775.cos.eu-frankfurt.myqcloud.com/image-20231022225244098.png",alt:""}})]),t._v(" "),a("p",[a("img",{attrs:{src:"https://markdown-1301334775.cos.eu-frankfurt.myqcloud.com/image-20231022225655621.png",alt:"image-20231022225655621"}})]),t._v(" "),a("h2",{attrs:{id:"intset"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#intset"}},[t._v("#")]),t._v(" IntSet")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("在数据量不大的时候，存数字")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://markdown-1301334775.cos.eu-frankfurt.myqcloud.com/image-20231022230159657.png",alt:"image-20231022230159657"}})]),t._v(" "),a("p",[a("img",{attrs:{src:"https://markdown-1301334775.cos.eu-frankfurt.myqcloud.com/image-20231022230322489.png",alt:"image-20231022230322489"}})])]),t._v(" "),a("li",[a("p",[t._v("在添加一个放不下的元素之后升级扩容"),a("img",{attrs:{src:"https://markdown-1301334775.cos.eu-frankfurt.myqcloud.com/image-20231022230948052.png",alt:"image-20231022230948052"}})])]),t._v(" "),a("li",[a("p",[t._v("会确保元素的唯一，有序")])]),t._v(" "),a("li",[a("p",[t._v("底层采用二分查找、")])])]),t._v(" "),a("h2",{attrs:{id:"dict"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#dict"}},[t._v("#")]),t._v(" Dict")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://markdown-1301334775.cos.eu-frankfurt.myqcloud.com/image-20231022232851627.png",alt:"image-20231022232851627"}})]),t._v(" "),a("p",[a("img",{attrs:{src:"https://markdown-1301334775.cos.eu-frankfurt.myqcloud.com/image-20231022231944400.png",alt:"image-20231022231944400"}})]),t._v(" "),a("ul",[a("li",[t._v("used有可能大于size的大小，因为可能哈希冲突，一个key对应多个value（*next）")]),t._v(" "),a("li",[t._v("union表示v可以是这四种类型中任意一种")]),t._v(" "),a("li",[t._v("为什么需要sizemask？hash的时候对size求余运算 == 和size -1 求与运算 【必须在size是2的n次方的情况下】")])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://markdown-1301334775.cos.eu-frankfurt.myqcloud.com/image-20231022232706521.png",alt:"image-20231022232706521"}})]),t._v(" "),a("p",[a("img",{attrs:{src:"https://markdown-1301334775.cos.eu-frankfurt.myqcloud.com/image-20231022232927033.png",alt:"image-20231022232927033"}})]),t._v(" "),a("ul",[a("li",[a("p",[t._v("每次冲突的时候往队首加就可以，否则要遍历好多次")])]),t._v(" "),a("li",[a("p",[t._v("rehash"),a("img",{attrs:{src:"https://markdown-1301334775.cos.eu-frankfurt.myqcloud.com/image-20231022234048876.png",alt:"image-20231022234048876"}})])]),t._v(" "),a("li",[a("p",[a("img",{attrs:{src:"https://markdown-1301334775.cos.eu-frankfurt.myqcloud.com/image-20231022234210142.png",alt:"image-20231022234210142"}})])])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://markdown-1301334775.cos.eu-frankfurt.myqcloud.com/image-20231023000923250.png",alt:"image-20231023000923250"}})]),t._v(" "),a("ul",[a("li",[t._v("由于rehash可能数据量过大，主线程会很慢，所以采用渐进式"),a("img",{attrs:{src:"https://markdown-1301334775.cos.eu-frankfurt.myqcloud.com/image-20231023001401729.png",alt:"image-20231023001401729"}})])]),t._v(" "),a("h2",{attrs:{id:"ziplist"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ziplist"}},[t._v("#")]),t._v(" ZipList")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://markdown-1301334775.cos.eu-frankfurt.myqcloud.com/image-20231023110714164.png",alt:"image-20231023110714164"}})]),t._v(" "),a("p",[a("img",{attrs:{src:"https://markdown-1301334775.cos.eu-frankfurt.myqcloud.com/image-20231023111327107.png",alt:"image-20231023111327107"}})]),t._v(" "),a("p",[a("img",{attrs:{src:"https://markdown-1301334775.cos.eu-frankfurt.myqcloud.com/image-20231023111725824.png",alt:""}})]),t._v(" "),a("p",[a("img",{attrs:{src:"https://markdown-1301334775.cos.eu-frankfurt.myqcloud.com/image-20231023112419553.png",alt:"image-20231023112419553"}})]),t._v(" "),a("ul",[a("li",[t._v("连锁更新问题"),a("img",{attrs:{src:"https://markdown-1301334775.cos.eu-frankfurt.myqcloud.com/image-20231023112835283.png",alt:"image-20231023112835283"}})])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://markdown-1301334775.cos.eu-frankfurt.myqcloud.com/image-20231023113002227.png",alt:"image-20231023113002227"}})]),t._v(" "),a("h2",{attrs:{id:"quicklist"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#quicklist"}},[t._v("#")]),t._v(" QuickList")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://markdown-1301334775.cos.eu-frankfurt.myqcloud.com/image-20231023113646216.png",alt:"image-20231023113646216"}})]),t._v(" "),a("p",[a("img",{attrs:{src:"https://markdown-1301334775.cos.eu-frankfurt.myqcloud.com/image-20231023113826362.png",alt:"image-20231023113826362"}})]),t._v(" "),a("p",[a("img",{attrs:{src:"https://markdown-1301334775.cos.eu-frankfurt.myqcloud.com/image-20231023113914170.png",alt:"image-20231023113914170"}})]),t._v(" "),a("p",[a("img",{attrs:{src:"https://markdown-1301334775.cos.eu-frankfurt.myqcloud.com/image-20231023114207740.png",alt:"image-20231023114207740"}})]),t._v(" "),a("h2",{attrs:{id:"skiplist"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#skiplist"}},[t._v("#")]),t._v(" SkipList")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://markdown-1301334775.cos.eu-frankfurt.myqcloud.com/image-20231023120806383.png",alt:"image-20231023120806383"}})]),t._v(" "),a("p",[a("img",{attrs:{src:"https://markdown-1301334775.cos.eu-frankfurt.myqcloud.com/image-20231023120904268.png",alt:"image-20231023120904268"}})]),t._v(" "),a("p",[a("img",{attrs:{src:"https://markdown-1301334775.cos.eu-frankfurt.myqcloud.com/image-20231023120944768.png",alt:"image-20231023120944768"}})]),t._v(" "),a("h2",{attrs:{id:"redisobject"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#redisobject"}},[t._v("#")]),t._v(" RedisObject")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://markdown-1301334775.cos.eu-frankfurt.myqcloud.com/image-20231023121303177.png",alt:"image-20231023121303177"}})]),t._v(" "),a("ul",[a("li",[t._v("编码方式就是用上面哪个数据结构来实现"),a("img",{attrs:{src:"https://markdown-1301334775.cos.eu-frankfurt.myqcloud.com/image-20231023121558062.png",alt:"image-20231023121558062"}})]),t._v(" "),a("li",[a("img",{attrs:{src:"https://markdown-1301334775.cos.eu-frankfurt.myqcloud.com/image-20231023121723854.png",alt:"image-20231023121723854"}})])]),t._v(" "),a("h2",{attrs:{id:"string"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#string"}},[t._v("#")]),t._v(" String")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://markdown-1301334775.cos.eu-frankfurt.myqcloud.com/image-20231023140052403.png",alt:"image-20231023140052403"}})]),t._v(" "),a("ul",[a("li",[t._v("EMBSTR：最好字符串不要超过44字节，这样就一共分配64字节，正好是redis申请内存的一个分片大小")])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://markdown-1301334775.cos.eu-frankfurt.myqcloud.com/image-20231023135958893.png",alt:"image-20231023135958893"}})]),t._v(" "),a("h2",{attrs:{id:"list"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#list"}},[t._v("#")]),t._v(" List")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://markdown-1301334775.cos.eu-frankfurt.myqcloud.com/image-20231023140538722.png",alt:"image-20231023140538722"}})]),t._v(" "),a("p",[a("img",{attrs:{src:"https://markdown-1301334775.cos.eu-frankfurt.myqcloud.com/image-20231023140908766.png",alt:"image-20231023140908766"}})]),t._v(" "),a("h2",{attrs:{id:"set"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#set"}},[t._v("#")]),t._v(" Set")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://markdown-1301334775.cos.eu-frankfurt.myqcloud.com/image-20231023142648721.png",alt:"image-20231023142648721"}})]),t._v(" "),a("p",[a("img",{attrs:{src:"https://markdown-1301334775.cos.eu-frankfurt.myqcloud.com/image-20231023143218870.png",alt:"image-20231023143218870"}})]),t._v(" "),a("p",[a("img",{attrs:{src:"https://markdown-1301334775.cos.eu-frankfurt.myqcloud.com/image-20231023143453805.png",alt:"image-20231023143453805"}})]),t._v(" "),a("h2",{attrs:{id:"zset"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#zset"}},[t._v("#")]),t._v(" ZSet")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://markdown-1301334775.cos.eu-frankfurt.myqcloud.com/image-20231023144109371.png",alt:"image-20231023144109371"}})]),t._v(" "),a("p",[a("img",{attrs:{src:"https://markdown-1301334775.cos.eu-frankfurt.myqcloud.com/image-20231023144311886.png",alt:"image-20231023144311886"}})]),t._v(" "),a("ul",[a("li",[t._v("但是内存占用太高了")])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://markdown-1301334775.cos.eu-frankfurt.myqcloud.com/image-20231023145938382.png",alt:"image-20231023145938382"}})]),t._v(" "),a("h2",{attrs:{id:"hash"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#hash"}},[t._v("#")]),t._v(" Hash")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://markdown-1301334775.cos.eu-frankfurt.myqcloud.com/image-20231023150330077.png",alt:"image-20231023150330077"}})]),t._v(" "),a("p",[a("img",{attrs:{src:"https://markdown-1301334775.cos.eu-frankfurt.myqcloud.com/image-20231023150714988.png",alt:"image-20231023150714988"}})]),t._v(" "),a("h2",{attrs:{id:"过期策略"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#过期策略"}},[t._v("#")]),t._v(" 过期策略")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://markdown-1301334775.cos.eu-frankfurt.myqcloud.com/image-20231024152511167.png",alt:"image-20231024152511167"}})]),t._v(" "),a("p",[a("img",{attrs:{src:"https://markdown-1301334775.cos.eu-frankfurt.myqcloud.com/image-20231024154117403.png",alt:"image-20231024154117403"}})]),t._v(" "),a("ul",[a("li",[t._v("用了另一个dict来存，key和之前的一样，val存的是过期时间")])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://markdown-1301334775.cos.eu-frankfurt.myqcloud.com/image-20231024154639276.png",alt:"image-20231024154639276"}})]),t._v(" "),a("p",[a("img",{attrs:{src:"https://markdown-1301334775.cos.eu-frankfurt.myqcloud.com/image-20231024154618214.png",alt:"image-20231024154618214"}})]),t._v(" "),a("p",[a("img",{attrs:{src:"https://markdown-1301334775.cos.eu-frankfurt.myqcloud.com/image-20231024155228722.png",alt:"image-20231024155228722"}})]),t._v(" "),a("p",[a("img",{attrs:{src:"https://markdown-1301334775.cos.eu-frankfurt.myqcloud.com/image-20231024160646479.png",alt:"image-20231024160646479"}})]),t._v(" "),a("h2",{attrs:{id:"淘汰策略"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#淘汰策略"}},[t._v("#")]),t._v(" 淘汰策略")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://markdown-1301334775.cos.eu-frankfurt.myqcloud.com/image-20231024161105148.png",alt:"image-20231024161105148"}})]),t._v(" "),a("p",[a("img",{attrs:{src:"https://markdown-1301334775.cos.eu-frankfurt.myqcloud.com/image-20231024161357971.png",alt:"image-20231024161357971"}})]),t._v(" "),a("p",[a("img",{attrs:{src:"https://markdown-1301334775.cos.eu-frankfurt.myqcloud.com/image-20231024161854294.png",alt:"image-20231024161854294"}})]),t._v(" "),a("p",[a("img",{attrs:{src:"https://markdown-1301334775.cos.eu-frankfurt.myqcloud.com/image-20231024162501570.png",alt:"image-20231024162501570"}})]),t._v(" "),a("h2",{attrs:{id:"分片"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#分片"}},[t._v("#")]),t._v(" 分片")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://markdown-1301334775.cos.eu-frankfurt.myqcloud.com/image-20231024172420853.png",alt:"image-20231024172420853"}})]),t._v(" "),a("h2",{attrs:{id:"缓存"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#缓存"}},[t._v("#")]),t._v(" 缓存")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://markdown-1301334775.cos.eu-frankfurt.myqcloud.com/image-20231024172845892.png",alt:"image-20231024172845892"}})]),t._v(" "),a("h2",{attrs:{id:"为什么不用redis做消息队列"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#为什么不用redis做消息队列"}},[t._v("#")]),t._v(" 为什么不用redis做消息队列")]),t._v(" "),a("h2",{attrs:{id:""}},[a("a",{staticClass:"header-anchor",attrs:{href:"#"}},[t._v("#")]),t._v(" "),a("img",{attrs:{src:"https://markdown-1301334775.cos.eu-frankfurt.myqcloud.com/image-20231024175654217.png",alt:"image-20231024175654217"}})]),t._v(" "),a("p",[a("img",{attrs:{src:"https://markdown-1301334775.cos.eu-frankfurt.myqcloud.com/image-20231024173410144.png",alt:"image-20231024173410144"}})]),t._v(" "),a("h2",{attrs:{id:"redis备份"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#redis备份"}},[t._v("#")]),t._v(" redis备份")]),t._v(" "),a("p",[t._v("AOF")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://markdown-1301334775.cos.eu-frankfurt.myqcloud.com/image-20231024173704538.png",alt:"image-20231024173704538"}})]),t._v(" "),a("p",[a("img",{attrs:{src:"https://markdown-1301334775.cos.eu-frankfurt.myqcloud.com/image-20231024173815591.png",alt:"image-20231024173815591"}})]),t._v(" "),a("h2",{attrs:{id:"主从"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#主从"}},[t._v("#")]),t._v(" 主从")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://markdown-1301334775.cos.eu-frankfurt.myqcloud.com/image-20231024174855942.png",alt:"image-20231024174855942"}})]),t._v(" "),a("h2",{attrs:{id:"容灾"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#容灾"}},[t._v("#")]),t._v(" 容灾")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://markdown-1301334775.cos.eu-frankfurt.myqcloud.com/image-20231024175224816.png",alt:"image-20231024175224816"}})]),t._v(" "),a("p",[a("img",{attrs:{src:"https://markdown-1301334775.cos.eu-frankfurt.myqcloud.com/image-20231102190157109.png",alt:"image-20231102190157109"}})])])}),[],!1,null,null,null);a.default=m.exports}}]);