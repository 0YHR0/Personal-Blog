(window.webpackJsonp=window.webpackJsonp||[]).push([[288],{686:function(s,t,a){"use strict";a.r(t);var n=a(2),e=Object(n.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:""}},[t("a",{staticClass:"header-anchor",attrs:{href:"#"}},[s._v("#")])]),s._v(" "),t("h1",{attrs:{id:"数据类型"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#数据类型"}},[s._v("#")]),s._v(" 数据类型")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://markdown-1301334775.cos.eu-frankfurt.myqcloud.com/image-20231018162435719.png",alt:"image-20231018162435719"}})]),s._v(" "),t("h2",{attrs:{id:"nosql"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#nosql"}},[s._v("#")]),s._v(" Nosql")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://markdown-1301334775.cos.eu-frankfurt.myqcloud.com/image-20231018224553903.png",alt:"image-20231018224553903"}})]),s._v(" "),t("ul",[t("li",[s._v("redis是区分大小写的")]),s._v(" "),t("li",[s._v("默认value都是字符串，存储的是二进制")])]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("SET")]),s._v(" key value \n"),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("GET")]),s._v(" key\n"),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("DEL")]),s._v(" key "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//删除")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("EXISTS")]),s._v(" key "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//判断一个键是否存在")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("KEYS")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("pattern"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//寻找符合patten 的key， 如 keys *")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("FLUSHALL")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//删除所有的键")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("TTL")]),s._v(" key "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//查询一个键的过期时间")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("EXPIRE")]),s._v(" key seconds "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//设置一个键的过期时间 如 expire name 10 （10秒）")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("SETEX")]),s._v(" key seconds value"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//设置一个带有过期时间的键，原子操作")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("SETNX")]),s._v(" key value "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//只有当键不存在的时候设置kv")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br")])]),t("h2",{attrs:{id:"list"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#list"}},[s._v("#")]),s._v(" List")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("LPUSH")]),s._v(" key element"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// LPUSH letter a 往letter列表头部添加一个元素 a")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("LRANGE")]),s._v(" key start end "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 获取列表中的元素，起始位置开始是0， 结束位置末尾是 -1")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("RPUSH")]),s._v(" key element"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 从尾部添加元素")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("LPOP")]),s._v(" key count "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//删除左边第一个元素， count为要删除元素的个数")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("RPOP")]),s._v(" key count "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//删除右边第一个元素")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("LLEN")]),s._v(" key "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 查看列表的长度")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("LTRIM")]),s._v(" key start end "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 删除start-end之外的元素，全闭区间")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("img",{staticStyle:{zoom:"25%"},attrs:{src:"https://markdown-1301334775.cos.eu-frankfurt.myqcloud.com/image-20231019172539334.png",alt:"image-20231019172539334"}}),s._v(" "),t("h2",{attrs:{id:"set"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#set"}},[s._v("#")]),s._v(" Set")]),s._v(" "),t("p",[s._v("Set是一种无序集合，和列表的区别在于，列表中的元素可以重复，set中的元素不可以重复")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("SADD")]),s._v(" key element"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//在set中添加元素 ")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("SMEMBERS")]),s._v(" key "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//用来查询所有集合中的元素")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("SISMEMBER")]),s._v(" key element "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 查询element是否在集合中")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("SREM")]),s._v(" key element "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//删除集合中的某个元素")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("SINTER")]),s._v(" key"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 取几个集合的交集")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("SUNION")]),s._v(" key"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//取几个集合的并集")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("SDIFF")]),s._v(" key"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//Returns the difference of multiple sets.")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("h2",{attrs:{id:"sortedset"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#sortedset"}},[s._v("#")]),s._v(" SortedSet")]),s._v(" "),t("ul",[t("li",[s._v("也叫Zset，有序集合")])]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("ZADD")]),s._v(" key "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("NX")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("XX")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("GT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("LT")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("CH")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("INCR")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" score member "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("score member "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n    \n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ZADD uni 100 ecust 200 stuttgart")]),s._v("\n    \n"),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("ZRANGE")]),s._v(" result "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("withscores"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//可以输出范围内的成员，以及分数")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("DEL")]),s._v(" key"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//删除整个集合")]),s._v("\n    \n"),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("ZSCORE")]),s._v(" key member "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 可以看到对应成员的分数")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("ZRANK")]),s._v(" key member "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 可以查看排名，从小到大的排名")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("ZREVRANK")]),s._v(" key member "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 从大到小排名，返回的是index")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("ZREM")]),s._v(" key member "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 删除某个成员")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("ZREMRANGEBYRANK")]),s._v(" key start stop "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 删除[start, stop]排名范围内的所有成员")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("ZREMRANGEBYSCORE")]),s._v(" key min max "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//根据score删除")]),s._v("\nzcard key "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 获取有序集合的成员数量")]),s._v("\nzcount key "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("23")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 计算有序集合中指定区间分数的成员数")]),s._v("\nzincrby key "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v(" member"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//增加分数")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br")])]),t("ul",[t("li",[s._v("跳表，插入○(㏒n)"),t("img",{attrs:{src:"https://markdown-1301334775.cos.eu-frankfurt.myqcloud.com/image-20231022113316454.png",alt:"image-20231022113316454"}})]),s._v(" "),t("li",[s._v("修改时维护平衡性"),t("img",{attrs:{src:"https://markdown-1301334775.cos.eu-frankfurt.myqcloud.com/image-20231022113336170.png",alt:"image-20231022113336170"}})])]),s._v(" "),t("h2",{attrs:{id:"hash"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#hash"}},[s._v("#")]),s._v(" Hash")]),s._v(" "),t("ul",[t("li",[s._v("键值对")])]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("HSET")]),s._v(" key field value "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("field value "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 在一个hash里添加键值对，hset dogs name yang")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("HGET")]),s._v(" key field "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//获取某一个值")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("HGETALL")]),s._v(" key "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//返回所有的键值对")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("HDEL")]),s._v(" key field "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//删除hash中的某个键值对")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("HEXISTS")]),s._v(" key field "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//判断某个键值对是否存在")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("HKEYS")]),s._v(" key"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//获取所有的键")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("HLEN")]),s._v(" key "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//获取键的数量")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("HSETNX")]),s._v(" key field value "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//只有在字段 field 不存在时，设置哈希表字段的值。")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("h2",{attrs:{id:"发布订阅"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#发布订阅"}},[s._v("#")]),s._v(" 发布订阅")]),s._v(" "),t("ul",[t("li",[s._v("消息无法持久化，无法记录历史消息")])]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("SUBSCRIBE")]),s._v(" channel "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("channel "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 订阅消息")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("PUBLISH")]),s._v(" channel message "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 发布消息")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h3",{attrs:{id:"stream"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#stream"}},[s._v("#")]),s._v(" Stream")]),s._v(" "),t("ul",[t("li",[s._v("id格式 时间戳-序列号")]),s._v(" "),t("li",[s._v("消息可以重复读取，不是读取一次就没了")]),s._v(" "),t("li",[s._v("https://www.runoob.com/redis/redis-stream.html")])]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("XADD")]),s._v(" key id field value \n"),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("XADD")]),s._v(" streamA "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" course redis     "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 向steam流中写入id自动生成的kv")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("XLEN")]),s._v(" key "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//查看消息数量")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("XRANGE")]),s._v(" key start end "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//查看id在范围内的消息")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("XRANGE")]),s._v(" key "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//所有消息")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("XDEL")]),s._v(" key id "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//删除消息")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("XTRIM")]),s._v(" key "),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("MAXLEN")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 删除所有消息")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("XREAD")]),s._v(" count "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" block "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1000")]),s._v(" key "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//在key消息队列中一次读取两条消息，如果没有消息就阻塞1000毫秒，0表示从头开始读取，如果是1表示从第二条消息开始读取，如果是$表示从现在开始读取消息")]),s._v("\n\n\n"),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("XGROUP")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("CREATE")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("stream")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("stream名称"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("group01")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("组的名称"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 0是id  ")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("XINFO")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("GROUPS")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("stream")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("stream名称"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//查看消费者组的信息")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("XGROUP")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("CREATECONSUMER")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("stream")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("stream名称"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("group01")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("组的名称"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("consumer")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("消费者的名字"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("XREADGROUP")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("GROUP")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("group01")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("组的名称"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("consumer")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("消费者的名字"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("COUNT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("2")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("一次读取两条消息"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("BLOCK")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("3000")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("如果没有消息，阻塞"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3000")]),s._v("ms"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("stream")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("stream名称"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("表示从这个流中读取最新的消息"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    \n"),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("XACK")]),s._v(" key group id "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("id "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//确认消息已经被消费")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br")])]),t("p",[t("img",{attrs:{src:"https://markdown-1301334775.cos.eu-frankfurt.myqcloud.com/image-20231019194729139.png",alt:"image-20231019194729139"}})]),s._v(" "),t("ul",[t("li",[s._v("stream(stream名称)")])]),s._v(" "),t("h2",{attrs:{id:"geospatial"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#geospatial"}},[s._v("#")]),s._v(" Geospatial")]),s._v(" "),t("ul",[t("li",[s._v("用来存地理位置")])]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("GEOADD")]),s._v(" city "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("116.405285")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("39.904989")]),s._v(" beijing "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//添加了北京的经纬度")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("GEOPOS")]),s._v(" city beijing "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//获取位置信息")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("GEODIST")]),s._v(" city beijing shanghai "),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("KM")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//计算两个地理位置之间的距离，km为单位")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("GEOSEARCH")]),s._v(" city "),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("FROMMEMBER")]),s._v(" shanghai "),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("BYRADIUS")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("300")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("KM")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 搜索上海附近圆形300km内的成员")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//可以以指定经纬度，或者成员位置为中心，搜索矩形（BYBOX）或者圆形范围内的成员")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("GEORADIUS")]),s._v(" key longitude latitude radius "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("M")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("KM")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("FT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("MI")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//指定经纬度圆形范围内")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("GEORADIUSBYMEMBER")]),s._v(" key member radius "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("M")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("KM")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("FT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("MI")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 某个成员圆形范围内")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("h2",{attrs:{id:"hyperloglog"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#hyperloglog"}},[s._v("#")]),s._v(" HyperLoglog")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("统计不相等元素的个数")])]),s._v(" "),t("li",[t("p",[s._v("原理是通过随机数，通过牺牲一定的精确度来换取更小的内存消耗")])]),s._v(" "),t("li",[t("p",[s._v("通常用在统计某个词的搜索次数等")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("PFADD")]),s._v(" course git docker redis "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 添加元素")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("PFCOUNT")]),s._v(" course "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//查看基数")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("PFMERGE")]),s._v(" result course1 course2 "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//可以合并两个HyperLoglog，结果放到result")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])])])]),s._v(" "),t("h2",{attrs:{id:"bitmap"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#bitmap"}},[s._v("#")]),s._v(" Bitmap")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("可以用来记录用户的在线状态，有没有点过赞等等")])]),s._v(" "),t("li",[t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("SETBIT")]),s._v(" dianzan "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//把它在偏移量为0的位置上设置为1")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("SETBIT")]),s._v(" dianzan "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//把它在偏移量为0的位置上设置为1")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("GETBIT")]),s._v(" dianzan "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//获取某个偏移量的值")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("SET")]),s._v(" dianzan "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"\\xF0"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("BITCOUNT")]),s._v(" dianzan "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//统计有多少个1")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("BITPOS")]),s._v(" dianzan "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//第一个出现0的位置，也可以在范围内查找，在后面加上 start end")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])])]),s._v(" "),t("li",[t("p",[t("img",{attrs:{src:"https://markdown-1301334775.cos.eu-frankfurt.myqcloud.com/image-20231019202307166.png",alt:"image-20231019202307166"}})])])]),s._v(" "),t("h2",{attrs:{id:"bitfield"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#bitfield"}},[s._v("#")]),s._v(" Bitfield")]),s._v(" "),t("ul",[t("li",[s._v("将很多小的整数，存储到一个较大的位图中")])]),s._v(" "),t("p",[t("img",{attrs:{src:"https://markdown-1301334775.cos.eu-frankfurt.myqcloud.com/image-20231019202825442.png",alt:"image-20231019202825442"}})]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[s._v("bitfield player"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" set u8 #"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//设置一个8位的无符号整数，第0个位置是1【等级】")]),s._v("\nget player"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\nbitfield player"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" get u8 #"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//获取")]),s._v("\nbitfield player"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" set u32 #"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//设置一个8位的无符号整数，第0个位置是1【金钱】")]),s._v("\nbitfield player"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" incrby u32 #"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//增加金币")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("h1",{attrs:{id:"事务"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#事务"}},[s._v("#")]),s._v(" 事务")]),s._v(" "),t("img",{staticStyle:{zoom:"25%"},attrs:{src:"https://markdown-1301334775.cos.eu-frankfurt.myqcloud.com/image-20231019203557309.png",alt:"image-20231019203557309"}}),s._v(" "),t("ul",[t("li",[s._v("批量操作在发送 EXEC 命令前被放入队列缓存。")]),s._v(" "),t("li",[s._v("收到 EXEC 命令后进入事务执行，事务中任意命令执行失败，其余的命令依然被执行。")]),s._v(" "),t("li",[s._v("在事务执行过程，其他客户端提交的命令请求不会插入到事务执行命令序列中。")])]),s._v(" "),t("p",[t("img",{attrs:{src:"https://markdown-1301334775.cos.eu-frankfurt.myqcloud.com/image-20231019203805378.png",alt:"image-20231019203805378"}})]),s._v(" "),t("p",[s._v("单个 Redis 命令的执行是原子性的，但 Redis 没有在事务上增加任何维持原子性的机制，所以 Redis 事务的执行并不是原子性的。")]),s._v(" "),t("p",[s._v("事务可以理解为一个打包的批量执行脚本，但批量指令并非原子化的操作，中间某条指令的失败不会导致前面已做指令的回滚，也不会造成后续的指令不做。")]),s._v(" "),t("ul",[t("li",[s._v("WATCH key [key ...]\n监视一个(或多个) key ，如果在事务执行之前这个(或这些) key 被其他命令所改动，那么事务将被打断。")]),s._v(" "),t("li",[s._v("UNWATCH\n取消 WATCH 命令对所有 key 的监视。")])]),s._v(" "),t("h1",{attrs:{id:"持久化"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#持久化"}},[s._v("#")]),s._v(" 持久化")]),s._v(" "),t("h3",{attrs:{id:"rdb-主要用来备份"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#rdb-主要用来备份"}},[s._v("#")]),s._v(" RDB(主要用来备份)")]),s._v(" "),t("ul",[t("li",[s._v("vi redis.conf 多少秒内有多少修改就进行一次快照"),t("img",{attrs:{src:"https://markdown-1301334775.cos.eu-frankfurt.myqcloud.com/image-20231019231943604.png",alt:"image-20231019231943604"}})]),s._v(" "),t("li",[s._v("或者登录后用save命令，直接触发快照dump.rdb（redis会阻塞）")]),s._v(" "),t("li",[s._v("或者用bgsave命令（会创建一个子进程，这样主进程就不会阻塞了）")])]),s._v(" "),t("h3",{attrs:{id:"aof"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#aof"}},[s._v("#")]),s._v(" AOF")]),s._v(" "),t("ul",[t("li",[s._v("当执行写命令的时候，会把命令追加到aof文件中，会以日志的形式记录每一个操作，redis重启的时候，会重新执行aof中的命令，重建数据库的内容")]),s._v(" "),t("li",[s._v("使用方式，在配置文件中把appendonly改成yes"),t("img",{attrs:{src:"https://markdown-1301334775.cos.eu-frankfurt.myqcloud.com/image-20231019232329302.png",alt:"image-20231019232329302"}})])]),s._v(" "),t("h2",{attrs:{id:"主从复制"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#主从复制"}},[s._v("#")]),s._v(" 主从复制")]),s._v(" "),t("p",[s._v("只能主节点复制到从节点")]),s._v(" "),t("ul",[t("li",[s._v("只需要修改从节点的配置")]),s._v(" "),t("li",[s._v("通过命令行修改，这种不常用"),t("img",{attrs:{src:"https://markdown-1301334775.cos.eu-frankfurt.myqcloud.com/image-20231019233052444.png",alt:"image-20231019233052444"}})]),s._v(" "),t("li",[s._v("通过配置文件修改redis.conf 启动的时候可以“redis-server redis.conf”指定配置文件\n"),t("ul",[t("li",[s._v("端口号：port 6380")]),s._v(" "),t("li",[s._v("pid"),t("img",{attrs:{src:"https://markdown-1301334775.cos.eu-frankfurt.myqcloud.com/image-20231019233212172.png",alt:"image-20231019233212172"}})]),s._v(" "),t("li",[s._v("dbfilename"),t("img",{attrs:{src:"https://markdown-1301334775.cos.eu-frankfurt.myqcloud.com/image-20231019233232393.png",alt:"image-20231019233232393"}})]),s._v(" "),t("li",[s._v("前面都是在单机上要修改的")]),s._v(" "),t("li",[s._v("然后"),t("img",{attrs:{src:"https://markdown-1301334775.cos.eu-frankfurt.myqcloud.com/image-20231019233253344.png",alt:"image-20231019233253344"}})]),s._v(" "),t("li",[s._v("info replication命令查看信息")])])])]),s._v(" "),t("h1",{attrs:{id:"哨兵"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#哨兵"}},[s._v("#")]),s._v(" 哨兵")]),s._v(" "),t("p",[s._v("会一直心跳监控redis节点是否正常，如果不正常就会通过发布订阅方式把一个从节点变成主节点")]),s._v(" "),t("ul",[t("li",[s._v("监控")]),s._v(" "),t("li",[s._v("通知")])]),s._v(" "),t("p",[s._v("使用redis sentinel来创建哨兵节点，先创建一个sentinel.conf")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://markdown-1301334775.cos.eu-frankfurt.myqcloud.com/image-20231019233925948.png",alt:"image-20231019233925948"}})]),s._v(" "),t("p",[s._v("master是主节点的名字，可以任意，最后一个1是需要多少个哨兵节点同意，就可以进行故障转移")]),s._v(" "),t("p",[s._v("哨兵节点也需要高可用，可以三台，然后选举领导者deng")])])}),[],!1,null,null,null);t.default=e.exports}}]);